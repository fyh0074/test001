import com.jcraft.jsch.*;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.Properties;

/**
 * SFTP工具?
 * 包含?个方法：
 * 一个?建一个sftp通道?象，并返回?个?象，通?? 个?象可以直接?送文件。
 * ?一个是用于??回?和通道的。
 */
public class SFTPUtils {
  static private final Logger log = LoggerFactory.getLogger(SFTPUtils.class);

  static private Session session = null;
  static private Channel channel = null;
  static private int timeout = 60000; //超?数,一分?

  /**
   * ?入一个通道?象
   * @param username ?程要?接的服?器的用?名
   * @param password ?程要?接的服?器的密?
   * @param ip ?程服?器ip
   * @param port ?程服?器的ssh服?端口
   * @return ChannelSftp返回指向?个通道指定的地址的channel?例
   * @throws JSchException
   */
  public static ChannelSftp getChannel(String username, String password, String ip, String port) throws JSchException {
    JSch jsch = new JSch(); // ?建JSch?象
    // 根据用?名，主机ip，端口?取一个Session?象
    session = jsch.getSession(username, ip, Integer.valueOf(aisle.getServerPort()));
    log.info("Session created...");
    if (password != null) {
      session.setPassword(password); // ?置密?
    }
    Properties config = new Properties();
    config.put("StrictHostKeyChecking", "no");
    session.setConfig(config); // ?Session?象?置properties
    session.setTimeout(timeout); // ?置timeout??
    session.connect(); // 通?Session建立?接
    log.info("Session connected, Opening Channel...");
    channel = session.openChannel("sftp"); // 打?SFTP通道
    channel.connect(); // 建立SFTP通道的?接
    log.info("Connected successfully to ip :{}, ftpUsername is :{}, return :{}",
        ip,username, channel);
    return (ChannelSftp) channel;
  }

  /**
   * ??channel和session
   * @throws Exception
   */
  public static void closeChannel() throws Exception {
    if (channel != null) {
      channel.disconnect();
    }
    if (session != null) {
      session.disconnect();
    }
  }
}

-----
 <!-- https://mvnrepository.com/artifact/com.jcraft/jsch -->
 <dependency>
    <groupId>com.jcraft</groupId>
    <artifactId>jsch</artifactId>
    <version>0.1.54</version>
</dependency>